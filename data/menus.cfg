//First some copies from the sauer menus, just saves me from writing them out, I reformatted them at least.

bind ESCAPE [
	do [
		@nokeybind [if (cleargui 1) [] [showgui main]; if $editing [showtexgui -1] []]
		@ctrlkeybind [cleargui; if $editing [showtexgui -1] []]
	]
]

showmapshot = [
	guibar
	guilist [
		if $numargs [
			guiimage (format "packages/base/%1/%2" $arg1 (at $guirollovername 0)) $guirolloveraction 5 1 "data/sandboxlogo"
		] [
			guiimage (format "packages/base/%1" (at $guirollovername 0)) $guirolloveraction 5 1 "data/sandboxlogo"
		]
		guitext $guirollovername
	]
]

maprotation = [
	n = (listlen $arg1)
	loop i $n [
		curmap = (at $arg1 $i)
		next = (mod (+ $i 1) $n)
		nextmap = (at $arg1 $next)
		(if (= $numargs 2) [concatword nextmap_ $arg2 $curmap] [concatword nextmap_ $curmap]) = $nextmap
	]
]

genmapitems = [
	looplist f $arg1 [
		guibutton $f (concat "map " $f)
	]
]

initentgui = [
	tmpt = ( et )
	loop i (getattrnum (enttype)) [
		alias (concatword tmp $i) (entattr $i)
	]
]

guilistsplit = [
	guilist [
		i = 0
		l = (listlen $arg3)
		z = (div (+ $l (- $arg2 1)) $arg2)
		loop a $arg2 [
			guilist [
				t = (min (+ $i $z) $l)
				while [< $i $t] [
					$arg1 = (at $arg3 $i)
					arg4
					i = (+ $i 1)
				]
			]
			if (&& (>= $numargs 5) (< (+ $a 1) $arg2)) [arg5]
		]
	]
]

entguitype = 0

drawentprops = [ //props, limits, offset
	offset = (? (>= $numargs 3) $arg3 0)
	loop i (listlen $arg1) [
		case $entguitype 0 [
			guilist [
				guitext (tabify (concatword (at $arg1 $i) ":") 3)
				guifield tmp@@(+ $offset $i) -20 [
					clamp tmp@@@i @@@(at $arg2 (* 2 $i)) @@@(at $arg2 (+ (* 2 $i) 1))
					entupdate
				]
			]
		] 1 [
			guitext (at $arg1 @i)
			guislider tmp@(+ $offset $i) @(at $arg2 (* 2 $i)) @(at $arg2 (+ (* 2 $i) 1)) [
				entupdate
			]
		]
	]
]

newentgui = [
	newgui $arg1 [
		guitext @arg1
		guibar

		drawentprops [ @@arg2 ] [ @@arg3 ]

		guitab type
		guilistsplit n 2 $enttypelist [
			guibutton $n [entset @n]
		]
		guitab misc
		guicheckbox "Usesliders" entguitype 1 0
		@quickeditmenu
	]
]

entupdate = [
	str = $tmpt;
	loop i (getattrnum $tmpt) [ str = (concat $str [$tmp@i])]
	do [entset @str]
]



setting_entediting = 1 //Ye Olde passthrough needs this

//END COPY, START Hirato's genius

//All the aliases that'll be used throughout

clamp = [alias $arg1 (max $arg2 (min $arg3 $$arg1))]		//clamp (alias) (min) (max)		- for integers
clampf = [alias $arg1 (maxf $arg2 (minf $arg3 $$arg1))]	//clamp (alias) (min) (max)		- for floats

loopix = "daysky"
skyboxes = "black dark desert dunes green hill nice"
amethyst7 = "starfield"
mayhem = "afterrain aqua4 aqua9 grouse prehistoric shattered trough"
penguins = "barren divine wrath"
vegastrike = "blue emerald fiery_galaxy mustard somered"

cloudboxen = "moon kenon_cloudbox" //hehe... cloudboxen :D
numcloudlayers = 5

moviename = "Insert movie title Here, and press button to record"

//dummies

masterterms = 0
newskypath = "skyboxes/black"

genskyitems = [
	guitext $arg2
	guistayopen [
		looplist f $arg1 [
			guibutton $f (format "%1 %2/%3" $arg3 $arg2 $f)
		]
	]
]

skyload = [
	if (>= (strstr "cloudbox skybox" (at $guirolloveraction 0)) 0) [
		guirolloveraction
	] [
		skybox $skybox
	]
]

showskyshot = [
	guistayopen [
		guilist [
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _ft) $skyload 4 1 data/sandboxlogo
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _rt) $skyload 4 1 data/sandboxlogo
		]
		guilist [
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _lf) $skyload 4 1 data/sandboxlogo
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _dn) $skyload 4 1 data/sandboxlogo
		]
		guilist [
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _bk) $skyload 4 1 data/sandboxlogo
			guiimage (format "<scale:128,128>packages/%1%2" (at $guirolloveraction 1) _up) $skyload 4 1 data/sandboxlogo
		]
	]
]



showentgui = [showquickgui]

bloomstrength = 0

pvssize = 32

skycol1 = 0
skycol2 = 0
skycol3 = 0
ambientcol1 = 0
ambientcol2 = 0
ambientcol3 = 0

multieffectname = circle
multieffectvalue = 0
multieffectreverse = 0

globalmaps = "ladder particleshowcase tutorial-texanim"

maps = ""
mapindex = 0



createmaplist = [
	maps = ""
	testmaps = (concat $globalmaps $arg1)
	loopfiles f packages/base ogz [
		match = (>= (listfind t $testmaps [ strcmp $t $f ]) 0)

		if (= $match 0) [maps = (concat $maps (format "^"%1^""  $f))] //^" caters for spaces in filenames
	]

	loopdir d packages/base [
		loopfiles f (concatword "packages/base/" $d) ogz [
			match = (>= (listfind t $testmaps [ strcmp $t $f ]) 0)

			if (= $match 0) [maps = (concat $maps (format "^"%1/%2^"" $d $f))]
		]
	]
]

themes = ""
themenum = 0
themeidx = 0

createthemelist = [
	themes = "" //don't forget to reset it
	loopfiles f data/hud cfg [
		themes = (format "%1 ^"%2^"" $themes $f)
	]
	themenum = (listlen $themes)
]

crosshairlist = ""
crosshairnum = ""
crosshairs = "default" // defined in game
crosshairidx = 0 //the one to set

createcrosshairlist = [
	crosshairlist = ""
	loopfiles f packages/crosshairs png [
		crosshairlist = (concat $crosshairlist (concatword "packages/crosshairs/" $f))
	]
	crosshairnum = (listlen $crosshairlist)
]

fonts = ""
fontnum = 0
fontidx = 0

createfontslist = [
	fonts = "" //don't forget to reset it
	loopfiles f packages/fonts cfg [
		fonts = (format "%1 ^"%2^"" $fonts $f)
	]
	fontnum = (listlen $fonts)
]

custommusidx = 0
custommusicnum = 0

entt = 0
enta1 = 0
enta2 = 0
enta3 = 0
enta4 = 0
enta5 = 0
enta6 = 0
enta7 = 0
enta8 = 0
dosearch0 = 1
dosearch1 = 1
dosearch2 = 1
dosearch3 = 1
dosearch4 = 1
dosearch5 = 1
dosearch6 = 1
dosearch7 = 1
dosearch8 = 1
doinsel = 0

findents = [
	match = 1
	if $doinsel [
		match = (* $match (if (= $doinsel 1) insel [! (insel)]))
	]
	if $dosearch0 [
		match = (* $match (strcmp (enttype) (at $enttypelist $entt)))
	]
	loop i (getatrnum (enttype)) [
		if $dosearch@(+ $i 1) [
			match = (* $match (= (entattr $i) $enta@(+ $i 1)))
		]
	]

	result $match
]

col1 = 0
col2 = 0
col3 = 0
col21 = 0
col22 = 0
col23 = 0

newpartdir = 0
newpartstdtype = 3
newpartexpsize = 0
newpartfiretype = 0

newpartrad = 0
newpartfireheight = 0

newpartmulttype = 9
newpartmultlen = 0
newpartmulteffect = 0
newpartmultrev = 0
newpartmultvalue = 0
newpartmulteff = 0 //bool, generate using effects or directions

newpartbartype = 6
newpartbarprcnt = 0
newpartflaretype = 32
newpartsize = 0
newpartfade = 0
newparttag = 0

newpartgrav = 0
newpartvel = 0
newpartfade = 0
newpartmulteffcollide = 1

colfieldsa = [
	val1 = (concatword $arg1 "1")
	val2 = (concatword $arg1 "2")
	val3 = (concatword $arg1 "3")

	guifield $val1 -4 [ clamp @val1 0 255; alias @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val2 -4 [ clamp @val2 0 255; alias @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val3 -4 [ clamp @val3 0 255; alias @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
]

colfieldsb = [
	val1 = (concatword $arg1 "1")
	val2 = (concatword $arg1 "2")
	val3 = (concatword $arg1 "3")


	guifield $val1 -4 [ clamp @val1 0 255; @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val2 -4 [ clamp @val2 0 255; @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val3 -4 [ clamp @val3 0 255; @arg2 (mergecollevels $@val1 $@val2 $@val3); @arg3] (mergecollevels $$val1 $$val2 $$val3)
]

colfields = [
	if (>= $numargs 1) [
		val1 = (concatword $arg1 "1")
		val2 = (concatword $arg1 "2")
		val3 = (concatword $arg1 "3")
	] [
		val1 = "col1"
		val2 = "col2"
		val3 = "col3"
	]

	guifield $val1 -4 [ clamp @val1 0 255] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val2 -4 [ clamp @val2 0 255] (mergecollevels $$val1 $$val2 $$val3)
	guibar
	guifield $val3 -4 [ clamp @val3 0 255] (mergecollevels $$val1 $$val2 $$val3)
]

mapactionname = temp

lightrad = 0
lightr = 0
lightg = 0
lightb = 0
lightam = 1
lightatrset = [
	if (= $numargs 1) [
		lightrad = $arg1
	] [
		lightr = $arg1
		lightg = $arg2
		lightb = $arg3
	]
	cleargui 1
]

newmapsize = 10

MODE = 1

//GUI colour aliases

setcollevels = [
	(concatword $arg1 "1") = (>> (& $arg2 0xFF0000) 16)
	(concatword $arg1 "2") = (>> (& $arg2 0xFF00) 8)
	(concatword $arg1 "3") = (& $arg2 0xFF)
]

mergecollevels = [
	(| (| (<< $arg1 16) (<< $arg2 8)) $arg3)
]

notepadfile = "untitled.txt"

newgui notepad [
    guifield notepadfile -30
    showfileeditor $notepadfile -80 20
]

notepad = [
    if (> $numargs 0) [notepadfile = $arg1]
    showgui notepad
]

pastebuffer = [showgui pastebuffer]

scratchpad = [showgui scratchpad]

newbrushname = "logo"
newbrushpath = "data/sandboxlogo"

newgui keepconf [
	guitextbox "A configuration file for another version of sandbox is present. The settings stored within were disregarded and the defaults applied; It is highly advisable that the defaults be kept. This version of sandbox may contain new binds or break ones present in your configuration file.^n^nWhat would you like to do?" 50 4
	guistrut 2
	guibutton "use old configuration (not recommended)" [ignoreconfver 1; exec (format "config_%1.cfg" (getgame))]
	guibutton "keep defaults (recommended)" "cleargui"
]

////////////////
// START MENUS HERE
////////////////

newgui post [
	guistayopen [
		guibutton "(effect OFF)"          "clearpostfx"
		guibar
		guilist [
			guilist [

				guibutton "rotoscope" "rotoscope 1"
				guibutton "rotoscope + blur3" "rotoscope 1 1"
				guibutton "rotoscope + blur5" "rotoscope 1 2"
				guibutton "invert" "setpostfx invert"
				guibutton "sobel"  "setpostfx sobel"
			]
			guibar
			guilist [
				guibutton "gbr"    "setpostfx gbr"
				guibutton "bw"     "setpostfx bw"
				guibutton "blur3"  "setpostfx hblur3; addpostfx vblur3"
				guibutton "blur5"  "setpostfx hblur5; addpostfx vblur5"

			]
		]
		guibar
		guibutton (format "bloom (%1%2)" $bloomstrength "%")    "bloom (divf $bloomstrength 100)"
		guislider bloomstrength -100 100
	]
] "Post Processing"

brushmenu = [
	guititle "brushes"
	guilist [ // diamonds
		guiimage "data/brush_1c.png" brush_0
		guiimage "data/brush_21c.png" brush_1
		guiimage "data/brush_421c.png" brush_2
	]
	guilist [ // squares
		guiimage "data/brush_3s.png" brush_3
		guiimage "data/brush_5s.png" brush_4
		guiimage "data/brush_7s.png" brush_5
	]
	guititle smooth
	guilist [ // smooth
		guiimage "data/brush_3s.png" brush_6
		guiimage "data/brush_5s.png" brush_7
		guiimage "data/brush_7s.png" brush_8
	]
]

quickeditmenu = [
	guibutton "Savemap" "showgui savemap"
	guibutton "Loadmap" "showgui loadmap"
	guibar
	guibutton "Remip" "remip"
	guibutton "Quick Light" "calclight -1"
	guibar
	guibutton "New Entity" "newent light 64 240 200 150"
]

matmenu = [
	guibutton "material clear"     "air"  "" 0xFFFFFF
	guibutton "clip"    "clip"            "" 0xFF0000
	guibutton "glass"   "glass"           "" 0x00FFFF
	guibutton "lava"    "lava"            "" 0xFFA700
	guibutton "noclip"  "noclip"          "" 0x00FF00
	guibutton "water"   "water"           "" 0x0000FF
	guibutton "respawn" "editmat respawn" "" 0x2E2E2E
	guibutton "alpha"   "editmat alpha"   "" 0xAF3FAF
	guibutton "AI clip"	"editmat aiclip"  "" 0xFFFF00
	guibar
	guicheckbox "Show Material Volumes (M)" showmat
]

newgui "console" [
	guitext "console size (lines)"
	guislider consize
	guitext "console message filter:"
	guilist [
		guilist [
			guibitfield "important information" confilter 0x01
			guibitfield "warnings" confilter 0x02
			guibitfield "errors" confilter 0x04
			guibitfield "debug messages" confilter 0x08
			guibitfield "init messages" confilter 0x10
			guibitfield "script messages" confilter 0x20
		]
		guibar
		guilist [
			guibitfield "chat" confilter 0x100
			guibitfield "team chat" confilter 0x200
			guibitfield "important game events" confilter 0x400
			guibitfield "fell of the world" confilter 0x800
			guibitfield "others fell of the world" confilter 0x1000
		]
	]
	guitext "full console size (percent of screen)"
	guislider fullconsize
	guitext "full console message filter:"
	guilist [
		guilist [
			guibitfield "important information" fullconfilter 0x01
			guibitfield "warnings" fullconfilter 0x02
			guibitfield "errors" fullconfilter 0x04
			guibitfield "debug messages" fullconfilter 0x08
			guibitfield "init messages" fullconfilter 0x10
			guibitfield "script messages" fullconfilter 0x20
		]
		guibar
		guilist [
			guibitfield "chat" fullconfilter 0x100
			guibitfield "team chat" fullconfilter 0x200
			guibitfield "important game events" fullconfilter 0x400
			guibitfield "Fell of the World" fullconfilter 0x800
			guibitfield "Others fell of the world" fullconfilter 0x1000
		]
	]
]

partmultieffectname = [
	cond [< $arg1 3] [
		multieffectname = "Circle"
	] [< $arg1 6] [
		multieffectname = "Cylinder Shell"
	] [< $arg1 12] [
		multieffectname = "Cone Shell"
	] [< $arg1 15] [
		multieffectname = "Plane Volume"
	] [< $arg1 21] [
		multieffectname = "Line Volume (Wall)"
	] [ 1 ] [
		multieffectname = "Sphere"
	]
]

showfileeditor = [
	guinoautotab [
		guieditor $arg1 $arg2 $arg3
		textinit $arg1 $arg1
		guistayopen [
			guilist [
				guibutton "load" [textfocus @arg1; textload @arg1]
				guibar
				guibutton "save" [textfocus @arg1; textsave @arg1]
				guibar
				guibutton "exec" [textfocus @arg1; textexec]
				guibar
				guibutton "copy" [textfocus @arg1; textcopy]
				guibar
				guibutton "paste" [textfocus @arg1; textpaste]
				guibar
				guibutton "select" [textfocus @arg1; textselectall]
				guibar
				guibutton "clear" [textfocus @arg1; textclear]
			]
		]
	]
]

looplist e $enttypelist [
	newentgui $e "" ""
]

//particles and mapmodel is declared elsewhere
newentgui light "radius red green blue" "0 400 0 255 0 255 0 255"
newentgui spotlight "radius" "0 200"
newentgui playerstart "yaw tag" "0 360 0 10000"
newentgui envmap "radius size blur" "0 400 0 9 0 2"
newentgui sound "type radius size" "0 20 0 500 0 500"

newgui quit [
	guitext "Are you certain you wish to quit?"
	guitext "If you've not saved, any changes you made WILL BE LOST."
	guistrut 1
	guibutton "Save map" "savecurrentmap"
	guistrut 1
	guilist [
		guibutton "No, don't quit" "cleargui 1"
		guistrut 20
		guibutton "Yes, exit Sandbox" "quit" exit
	]
]

main = [
	guilist [
		if (= $editing 1) [
			guilist [
				guibutton "Newmap"		"showgui newmap"
				guibutton "Savemap"		"showgui savemap"
				guibar
	 			guibutton "New particle"	"showgui newparticles"
				guibutton "New light"		"showgui newlight"
				guibutton "New Mapmodel"	"showgui mapmodels"
				guibutton "Find Entities (F5)"	"showgui entfind"
				guibutton "Editing GUI"		"showgui editing"
				guibutton "Skybox menu (F4)"	"showgui skies"
				guibutton "Edit Materials"	"showgui materials"
				guibutton "Quickedit Menu (F3)"	"showquickgui" "menu"
				guibutton "Texture Menu (F2)"	"showtexgui" "menu"
			]
			guibar
		]
		guilist [
			guibutton "Toggle Editmode (e)"	"edittoggle"
			guibutton "Load Map"		"showgui maps; initmapgui"
			guibutton "Load Custom Map"	"showgui loadmap"
			guibutton "Multiplayer"		"showgui multiplayer"
			guibutton "Help"		"showgui help"
			guibar
			guibutton "Options"		"showgui options"
			guibutton "Movie Recorder"	"showgui recorder"
			guibutton "Jukebox"		"showgui jukebox"
			guistrut 1
			guibutton "About"		"showgui authors"
			guibutton "Exit The Game"	[ if $mainmenu [quit] [showgui quit]]	exit
		]
	]
]

newgui main [
	@main
]

newgui materials [
	@matmenu
]

newgui recorder [
	guilist [
		guilist [
			guilist [
				guitext "Name: "
				guifield moviename -15
			]
		]
		guistayopen [
			if (movierecording) [
				guiimage "data/stop" "movie" 2.5
			] [
				guiimage "data/record" "movie $moviename" 2.5
			]
		]
	]

	guicheckbox "Sound" moviesound
	guicheckbox "Sync sound and video" moviesync

	guilist [
		guitext "Size: "
		guifield moview 4
		guititle " x "
		guifield movieh 4
	]

	guitext "Framerate"
	guislider moviefps 1 100
	guistrut 1

	guitab "Advanced"
	guicheckbox "Accelleration" movieaccel
	guicheckbox "Blit accelleration" movieaccelblit
	guicheckbox "YUV accelleration" movieaccelyuv
]

newgui setglare [
	guitext "Intensity			"
	guislider glarescale 0 20
	guitext "Size"
	guislider glaresize
	guitext "Blur Intensity	"
	guislider blurglare
	guitext "Blur Radius"
	guislider blurglaresigma
	guitext "Particle Glare"
	guislider particleglare
	guicheckbox "Affect Skybox?" skyboxglare
	guibar
	guibutton "Back" "cleargui 1"
]

newgui debugsettings [
	guicheckbox "Blob Shadows"			dbgblob
	guicheckbox "DDS textures"			dbgdds
	guicheckbox "Decals"				dbgdec
	guicheckbox "Depth effects"			debugdepthfx
	guicheckbox "Display Modes"			dbgmodes
	guicheckbox "Dynlights (fixed function)"	dbgffdl
	guicheckbox "Glare"				debugglare
	guicheckbox "Grass"				dbggrass
	guicheckbox "Gzip CRCs"				dbggz
	guicheckbox "Map Variables"			dbgvars
	guicheckbox "Movie Recording"			dbgmovie
	guicheckbox "Music Playback"			dbgmusic
	guicheckbox "OpenGL Extensions"			dbgexts //don't think this is ever used cept in start up
	guicheckbox "Particles"				debugparticles
	guicheckbox "Particle Seeds"			dbgpseeds
	guicheckbox "Particle Seed Culling"		dbgpcull
	guitab "And some more stuff!"
	guicheckbox "Shaders"				dbgshader
	guicheckbox "Shadowmaps"			debugsm
	guicheckbox "Shadowmaps (fixed function)"	debugffsm
	guicheckbox "Sound Playback"			dbgsound
	guicheckbox "Zip Loading"			dbgzip
] "Toggle Stuff to Debug

newgui editopts [
	guilist [
		guilist [
			guitext "Show radius"
			guitext "Show direction"
			guitext "Show helpers"
			guitext "Show positions"
		]
		guistrut 2
		guilist [
			guiradio "Off" showentradius 0
			guiradio "Off" showentdir 0
			guiradio "Never" showenthelpers 0
			guiradio "When editing" showentities 0
		]
		guistrut 2
		guilist [
			guiradio "When selected" showentradius 1
			guiradio "When selected" showentdir 1
			guiradio "Editmode" showenthelpers 1
			guiradio "Editmode" showentities 1
		]
		guistrut 2
		guilist [
			guiradio "When possible" showentradius 2
			guiradio "When possible" showentdir 2
			guiradio "Always" showenthelpers 2
			guiradio "Always" showentities 2
		]
	]
	guistrut 1
	guilist [
		guilist [
			guicheckbox "always show dynlights" showdynlights
			guicheckbox "preview lighting" "showlighting"
		]
		guistrut 2
		guilist [
			guicheckbox "display particles" editingparticles
		]
	]
	guistrut 1
	guitext "Select marker type (default 5)"
	guislider entmarkertype

	guitab "Appearance"
	guilist [
		guilist [
			guicheckbox "Wireframe mode" wireframe
			guicheckbox "Show bounding boxes" showboundingbox
		]
		guititle "	"
		guilist [
			guicheckbox "Do depth testing for outline" dtoutline
			guicheckbox "Show material volumes" showmat
		]
	]
	guistrut 1
	guititle "Outlines"
	guilist [
		guistayopen [
			guitext "outlinecolour: "
			guibutton "back" "changeoutline -1"
			guistrut 1
			guicolor $outlinecolour
			guistrut 1
			guibutton "next" "changeoutline 1"
		]
	]
	guilist [
		guitext "custom colour: "
		guifield outlinecolour  10
	]
	guitab "Editing"
	guilist [
		guicheckbox "Heightmap mode (H)" hmapedit
	]
	guicheckbox "Apply texture changes to all faces (0)" allfaces
	guicheckbox "Gridsize matches selection" gridlookup
	guistrut 1
	guitext "Gridsize (G + scroll)"
	guislider gridsize
] "Entities"

newgui jukebox [
	guitext "to populate the custom track list place your tunes in"
	guitext "^f0packages/mymusic/"
	guitext "Windows users can also use ^f0my_stuff/packages/mymusic"
	guitext "Linux users can also use ^f0~/.platinumarts/packages/mymusic"
	guistrut 1
	guititle "Volume"
	guislider musicvol
	guititle "Playback Mode"
	guiradio "Random" playmode 0
	guiradio "Loop" playmode 1
	guiradio "Sequential" playmode 2

	guitab "Default"
	guistayopen [
		loop i (listlen $basesonglist) [
			guibutton (at $basesonglist $i) [
				music $guirollovername (format "playasong %1" @i)
			]
		]
	]
	guitab "Custom music"
	clamp custommusicidx 0 (- $custommusicnum (- $guiautotab 1))
	guistayopen [
		guibutton "Refresh" updatecustomsonglist
		guilist [
			if (< (- $guiautotab 1)  $custommusicnum) [
				guislider custommusicidx 0 (- $custommusicnum (- $guiautotab 1)) "" "" 1
				guibar
			]
			guilist [
				loop i (min (- $guiautotab 1) $custommusicnum) [
					guibutton (at $customsonglist (+ $custommusicidx $i)) [
						music (format "mymusic/%1" (at $customsonglist (+ @i $custommusicidx))) (format "playasong %1" (+ (listlen $basesonglist) (+ @i $custommusicidx)))
					]
				]
			]
		]
	]
]

newgui multiplayer [
	guitextbox (format "The current gameplay module (^fs^f0%1^fr) does not support multiplayer. If this is not the case, create a gui named ^"multiplayer^" inside ^fs^f0data/%1/menus.cfg^fr" (getgame)) 52
]

newgui newmap [
	guititle Newmap
	guitext "Select a size below and then click new map."
	guislider newmapsize 10 16
	guibar
	guibutton "New map" "newmap $newmapsize"
	]

newgui newlight [
	guitext (concat "Radius	" $lightrad) light
	guitext (concat "Red	" $lightr) lightr
	guitext (concat "Green	" $lightg) lightg
	guitext (concat "Blue	" $lightb) lightb
	guibar
	guistayopen [
		guibutton "Spawn Light" [newent light $lightrad $lightr $lightg $lightb] light
	]
	guibutton "Set Colour" "showgui newlight2"
	guibutton "Set Radius" "showgui newlight3"
	guitab "Advanced"
	guilist [
		guitext "Amount to spawn: " lights
		guifield lightam 5
	]
	guitext "Radius" light
	guislider lightrad 0 200
	guitext "Red" lightr
	guislider lightr 0 255
	guitext "Green" lightg
	guislider lightg 0 255
	guitext "Blue" lightb
	guislider lightb 0 255
	guibar
	guibutton "Spawn Light(s)" [loop i $lightam [newent light $lightrad $lightr $lightg $lightb]] light
]

newgui newlight2 [
	guibutton "Sun"		"lightatrset 255 224 192"
	guibutton "Red"		"lightatrset 255 0 0"
	guibutton "Green"	"lightatrset 0 255 0"
	guibutton "Blue"	"lightatrset 0 0 255"
	guibutton "Yellow"	"lightatrset 255 255 0"
	guibutton "Purple"	"lightatrset 255 0 255"
	guibutton "Aqua"	"lightatrset 0 255 255"
	guibutton "White"	"lightatrset 255 255 255"
	guibutton "Orange"	"lightatrset 255 127 0"
]

newgui newlight3 [
	guibutton "Infinity (Sun)"	"lightatrset 0"
	guibutton "Very short"		"lightatrset 8"
	guibutton "Short"		"lightatrset 32"
	guibutton "Moderate"		"lightatrset 64"
	guibutton "Moderately Long"	"lightatrset 96"
	guibutton "Long"		"lightatrset 128"
	guibutton "Very Long"		"lightatrset 256"
	guibutton "Very Very long"	"lightatrset 512"
	guibutton "Extremeley Long"	"lightatrset 1024"
]

newgui savemap [
	guitext "Enter the map's name"
	guifield mapactionname -20
	guibar
	guibutton (format "Save current map as %1" $mapactionname) "savemap $mapactionname"
	guibutton "Back" "cleargui 1"
]

newgui loadmap [
	guitext "Enter the map's name, and press Enter"
	guifield mapactionname -20
	guibar
	guibutton (format "Load %1" $mapactionname) "map $mapactionname"
	guibutton "Back" "cleargui 1
]

newgui authors [
	guitext "Plantinum Arts Sandbox, Cube 2 for kids."
	guitext "Creator: Michael Tomaino"
	guitext "Developers: Kevin Meyer, Thomas Achtner, Dale Weiler and Ilyas Gasanov"
	guitext "Artists: Richard Honeycutt"
	guitext "http://www.SandboxGameMaker.com"
	guitext "Platinum Arts Sandbox is a product of Platinum Arts LLC"
	guitext (format "Version: %1" $version)

	guitab Engine
	guitext "The Cube 2 engine."
	guitext "Created by Wouter van Oortmerssen."
	guitext "Currently maintained by Lee Salzman, and Robert Pointon"

	guitab "Testers"
	guitext "These people constantly report problems, without them,"
	guitext "PAS wouldn't be as great as it is now. Thanks a bunch!"
	guitext "linuxdonald, Clownfish"

	guitab "Thanks!"
	guitext "Special thanks to all the artists whose sounds and textures we use."
	guitext "PAS wouldn't look or sound nearly as fantastic without them,"
	guitext "and a big special thanks to you for your download and support"
]

newgui resolution [
	guistayopen [
		guilist [
			guilist [
				guibutton "320x240"              "screenres 320 240" (if (&& (= $scr_w 320) (= $scr_h 240)) [result "radio_on"] [result "radio_off"])
				guibutton "640x480"              "screenres 640 480" (if (&& (= $scr_w 640) (= $scr_h 480)) [result "radio_on"] [result "radio_off"])
				guibutton "800x600"              "screenres 800 600" (if (&& (= $scr_w 800) (= $scr_h 600)) [result "radio_on"] [result "radio_off"])
				guibutton "1024x768"             "screenres 1024 768" (if (&& (= $scr_w 1024) (= $scr_h 768)) [result "radio_on"] [result "radio_off"])
				guibutton "1152x864"             "screenres 1152 864" (if (&& (= $scr_w 1152) (= $scr_h 864)) [result "radio_on"] [result "radio_off"])
				guibutton "1280x960"             "screenres 1280 960" (if (&& (= $scr_w 1280) (= $scr_h 960)) [result "radio_on"] [result "radio_off"])
			]
			guibar
			guilist [
				guibutton "1400x1050"            "screenres 1400 1050" (if (&& (= $scr_w 1400) (= $scr_h 1050)) [result "radio_on"] [result "radio_off"])
				guibutton "1600x1200"            "screenres 1600 1200" (if (&& (= $scr_w 1600) (= $scr_h 1200)) [result "radio_on"] [result "radio_off"])
				guibutton "1792x1344"            "screenres 1792 1344" (if (&& (= $scr_w 1792) (= $scr_h 1344)) [result "radio_on"] [result "radio_off"])
				guibutton "1856x1392"            "screenres 1856 1392" (if (&& (= $scr_w 1856) (= $scr_h 1392)) [result "radio_on"] [result "radio_off"])
				guibutton "1920x1440"            "screenres 1920 1440" (if (&& (= $scr_w 1920) (= $scr_h 1440)) [result "radio_on"] [result "radio_off"])
				guibutton "2048x1536"            "screenres 2048 1536" (if (&& (= $scr_w 2048) (= $scr_h 1536)) [result "radio_on"] [result "radio_off"])
			]
			guibar
			guilist [
				guibutton "1024x640"             "screenres 1024 640" (if (&& (= $scr_w 1024) (= $scr_h 640)) [result "radio_on"] [result "radio_off"])
				guibutton "1280x720"             "screenres 1280 720" (if (&& (= $scr_w 1280) (= $scr_h 720)) [result "radio_on"] [result "radio_off"])
				guibutton "1280x768"             "screenres 1280 768" (if (&& (= $scr_w 1280) (= $scr_h 768)) [result "radio_on"] [result "radio_off"])
				guibutton "1280x800"             "screenres 1280 800" (if (&& (= $scr_w 1280) (= $scr_h 800)) [result "radio_on"] [result "radio_off"])
				guibutton "1440x900"             "screenres 1440 900" (if (&& (= $scr_w 1440) (= $scr_h 900)) [result "radio_on"] [result "radio_off"])
				guibutton "1600x1000"            "screenres 1600 1000" (if (&& (= $scr_w 1600) (= $scr_h 1000)) [result "radio_on"] [result "radio_off"])
			]
			guibar
			guilist [
				guibutton "1680x1050"            "screenres 1680 1050" (if (&& (= $scr_w 1680) (= $scr_h 1050)) [result "radio_on"] [result "radio_off"])
				guibutton "1920x1080"            "screenres 1920 1080" (if (&& (= $scr_w 1920) (= $scr_h 1080)) [result "radio_on"] [result "radio_off"])
				guibutton "1920x1200"            "screenres 1920 1200" (if (&& (= $scr_w 1920) (= $scr_h 1200)) [result "radio_on"] [result "radio_off"])
				guibutton "2048x1280"            "screenres 2048 1280" (if (&& (= $scr_w 2048) (= $scr_h 1280)) [result "radio_on"] [result "radio_off"])
				guibutton "2560x1600"            "screenres 2560 1600" (if (&& (= $scr_w 2560) (= $scr_h 1600)) [result "radio_on"] [result "radio_off"])
				guibutton "3840x2400"            "screenres 3840 2400" (if (&& (= $scr_w 3840) (= $scr_h 2400)) [result "radio_on"] [result "radio_off"])
			]
		]
	]
] "Resolution"

newgui crosshairs [
	guilist [
		loop i (listlen $crosshairs) [
			guiradio (at $crosshairs $i) crosshairidx $i
			guistrut 1
		]
	]
	guistrut 1
	guilist [
		guitext "Current: "
		guistayopen [ guiimage (getcrosshair $crosshairidx) [echo (getcrosshair $crosshairidx) ] .5 0]
	]
	guistrut 1

	guistayopen [
		loop i (div (+ 7 $crosshairnum) 8) [
			guilist [
				loop j (min 8 (- $crosshairnum (* $i 8))) [
					idx = (+ (* $i 8) $j)
					guiimage (at $crosshairlist $idx) [loadcrosshair @(at $crosshairlist $idx) @crosshairidx] 1 0
				]
			]
		]
	]
]



newgui fonts [
	clamp fontidx 0 (- $fontnum $guiautotab)
	guistayopen [
		guilist [
			guilist [
				loop i (min $fontnum $guiautotab) [
					fontindex = (+ $fontidx $i)
					guibutton (at $fonts $fontindex) (concat setfont (at $fonts $fontindex))
				]
			]
			guislider fontidx 0 (- $fontnum $guiautotab) "" 0 1
			guibar
			guifont $guirollovername [
				guitextbox "abcdefghijklmnopqrstuvwxyz^nABCDEFGHIJKLMNOPQRSTUVWXYZ^n`1234567890-=[]\;',./^n~!@#$%^^&*(){}:^"<>?" 40
			]
		]
	]

	guitab "Note"
	guitextbox "If you wish to override the default font, please add ^"^fs^f0setfont myfont^fr^" into your ^fs^f0autoexec.cfg^fr." 40
] "Fonts"

newgui options [
	guibutton "GUI themes" "showgui themes; createthemelist"
	guibutton "Set Crosshairs" "showgui crosshairs; createcrosshairlist"
	guibutton "Set Font" "showgui fonts; createfontslist"
	guilist [
		guibutton "Modify GUI Colours" "showgui setguicol"
		guibar
		guistayopen [
			guibutton "Reset Colours" guiresetcolours
		]
	]
	guibutton "Console Messages" "showgui console"
	guibutton "Debuging Settings" "showgui debugsettings"


	guistrut 1
	guibutton "Restore Defaults" "setdefaults"
	guibutton "PG UP and PG DN as universal delta" [bind PAGEUP [universaldelta -1]; bind PAGEDOWN [universaldelta 1]]

	guitab "Sound"
	guilist [
		guilist [
			guicheckbox "stereo				" stereo
			guitext "Sound Volume"
			guitext "Music Volume"
			guitext "Sound Frequency"
			guitext "Sound Channels"
			guitext "Sound Buffer Length"
		]
		guilist [
			guicheckbox "Mumble Positional Audio			" mumble
			guislider soundvol
			guislider musicvol
			guilistslider soundfreq "8000 16000 22050 32000 44100"
			guislider soundchans
			guilistslider soundbufferlen "128 256 512 768 1024 1280 1536 1792 2048 2304 2560 2816 3072 3328 3584 3840 4096"
		]
	]

	guitab "Graphics"

	guinoautotab [
		guilist [
			guicheckbox "Shaders	" shaders
			if $shaders [
				guiradio "Very Low" shaderdetail 0
				guistrut 1
				guiradio "Low" shaderdetail 1
				guistrut 1
				guiradio "Medium" shaderdetail 2
				guistrut 1
				guiradio "High" shaderdetail 3

			]
		]
		guibutton "Post Processing Effects" "showgui post"
		guistrut 1

		guilist [
			guicheckbox "Decals		" decals
			if $decals [
				guiradio "Medium" decalfade 10000 [maxdecaltris 1024]
				guistrut 2
				guiradio "High" decalfade 60000 [maxdecaltris 4096]
			]
		]
		guilist [
			guicheckbox "Soft Particles	" depthfx
			if $depthfx [
				guiradio "Low" depthfxsize 7 [depthfxrect 0; depthfxfilter 1; blurdepthfx 1]
				guistrut 2
				guiradio "Medium" depthfxsize 10 [depthfxrect 1; depthfxfilter 0; blurdepthfx 0]
				guistrut 2
				guiradio "High" depthfxsize 12 [depthfxrect 1; depthfxfilter 0; blurdepthfx 0]
			]
		]
		if (&& (= $renderpath 0) (>= $maxtmus 3)) [
			guicheckbox "Dynlights" ffdynlights 5 0
		]
		if (> $renderpath 0) [
			guicheckbox "Dynlights" maxdynlights 5 0
		]
		guilist [
			guicheckbox "Glass Envmap	" glassenv
			guiradio "Low" envmapsize 4
			guistrut 2
			guiradio "Medium" envmapsize 7
			guistrut 2
			guiradio "High" envmapsize 10
		]
		guilist [
			guicheckbox "Grass		" grass
			if $grass [
				guiradio "Low" grassdist 128
				guistrut 2
				guiradio "Medium"  grassdist 256
				guistrut 2
				guiradio "High"  grassdist 512
			]
		]
		guilist [
			glarepreset = 0
			if (= $glarescale 1) [
				if (= $blurglare 4) [glarepreset = 1]
				if (= $blurglare 7) [glarepreset = 3]
			]
			if (= $glarescale 2) [
				if (= $blurglare 3) [glarepreset = 2]
				if (= $blurglare 7) [glarepreset = 4]
			]

			guicheckbox "Glare			" glare
			if $glare [
				guiradio "Subtle" glarepreset 1 [blurglare 4; glarescale 1]
				guistrut 2
				guiradio "Glowy" glarepreset 2 [blurglare 3; glarescale 2]
				guistrut 2
				guiradio "Soft" glarepreset 3 [blurglare 7; glarescale 1]
				guistrut 2
				guiradio "intense" glarepreset 4 [blurglare 7; glarescale 2]
			]
		]
		guilist [
			guicheckbox "Motion Blur	" motionblur
			if $motionblur [
				guiradio "Subtle" motionblurscale 0.5
				guistrut 2
				guiradio "Moderate" motionblurscale 0.65
				guistrut 2
				guiradio "Intense" motionblurscale 0.8
			]
		]
		guilist [
			guicheckbox "Shadowmaps	" shadowmap
			if $shadowmap [
				guiradio "Low" shadowmapsize 7 [blurshadowmap 1]
				guistrut 2
				guiradio "Medium" shadowmapsize 9 [blurshadowmap 1]
				guistrut 2
				guiradio "High" shadowmapsize 11 [blurshadowmap 2]
			] [
				guicheckbox "Blobs" blobs
			]
		]
		guilist [
			guitext "Models	"
			guicheckbox "Bumpmap" bumpmodels
			guistrut 2
			guicheckbox "Glow" glowmodels
			guistrut 2
			guicheckbox "Envmap" envmapmodels
			guistrut 2
			guicheckbox "Lights" lightmodels
		]
		guilist [
			guitext "Water	"
			guicheckbox "Envmap" waterenvmap
			guistrut 1
			guicheckbox "Fade" waterfade
			guistrut 1
			guicheckbox "Refraction" waterrefract
			guistrut 1
			guicheckbox "Animation" vertwater
		]
		guilist [
			guistrut 10
			guicheckbox "Reflection" waterreflect
			guistrut 2
			guiradio "Low" reflectsize 6
			guistrut 2
			guiradio "Medium" reflectsize 8
			guistrut 2
			guiradio "High" reflectsize 10
		]

		guilist [
			guitext "Waterfall	"
			guicheckbox "Envmap" waterfallenv
			guistrut 1
			guicheckbox "Refraction" waterfallrefract
		]
	]

	guitab "Display"

	guibutton "Select resolution" "showgui resolution"
	guilist [
		guitext "Resolution: "
		guifield scr_w -5
		guititle " x " $guitextcolour
		guifield scr_h -5
	]
	guistrut 1
	guilist [
		guilist [
			guicheckbox "V-sync				" vsync
			guitext "Gamma"
			guitext "Anti-Aliasing"
			guitext "Anisotropic Filtering"
			guitext "Colour Depth"
		]
		guistrut 1
		guilist [
			guicheckbox "Fullscreen					" fullscreen
			guislider gamma
			guilistslider fsaa "0 1 2 4 8 16"
			guilistslider aniso "0 1 2 4 8 16"
			guilistslider colorbits "0 8 16 32"
		]
	]

	guitab "Misc."
	guitext "Menus"
	guilist [
		guicheckbox "2D Menus		" gui2d
		guicheckbox "Click to select tabs" guiclicktab
	]
	guistrut 1
	guitext "Mouse"
	guilist [
		guicheckbox "Invert Y-axis	" invmouse
		guitext "Sensitivity: "
		guifield sensitivity
	]
	guitab "Game"

	gameoptions
] "Options"

gameoptions = [
	guitext "There are no options to configure"
]

newgui blendmaps [
	guitext (format "Brush: %1" (getblendbrushname (curblendbrush)))
	guistayopen [ guilist [
		guibutton "back" "nextblendbrush -1"
		guistrut 4
		guibutton "next" "nextblendbrush 1"
	]]
	guistrut 1
	guitext "Blend Paint Mode"
	n = (listlen $paintmodes)
	loop i (+ (div $n 3) 1) [
		guilist [
			loop j 3 [
				if (< (+ (* $i 3) $j) $n) [
					if $j [guistrut 2]
					guiradio (at $paintmodes (+ (* $i 3) $j)) blendpaintmode (+ (* $j 3) $i) [hmapedit 0]
				]
			]
		]
	]
	guistrut 1
	guilist [
		guitext "Name:	"
		guifield newbrushname -20
	]
	guilist [
		guitext "Path:		"
		guifield newbrushpath -20
	]
	guistayopen [
		guibutton "Add above brush" "addblendbrush $newbrushname $newbrushpath"
		guibutton "Purge above brush" "delblendbrush $newbrushname"
		guistrut 1
		guibutton "Generate Preview" "showblendmap"
		guistrut 1
		guibutton "Clear Blendmap" "clearblendmap"
	]
]

newgui editing [
	guilist [
		guilist [
			guibutton "New Mapmodel (F1)" "showgui mapmodels"
			guibutton "Show Texture GUI (F2)" "showtexgui" "menu"
			guibutton "Show Quickedit Menu (F3)" "showquickgui" "menu"
			guibutton "Skyboxes (F4)" "showgui skies" skybox
			guibutton "Find Entities (F5)" "showgui entfind"
			guibutton "Blendmaps" "showgui blendmaps"
			guibutton "Editmode Options" "showgui editopts"
			guibutton "New Particles" "showgui newparticles"
			guibutton "New Light" "showgui newlight" "lights"
		]
		guititle "	"
		guilist [
			guibutton "Copy (C)" "editcopy"
			guibutton "Copy Entities" "entcopy"
			guibutton "Paste (V)" "editpaste"
			guibutton "Paste Entities" "entpaste"
			guibutton "Heightmap Mode (H)" [hmapedit (! $hmapedit); blendpaintmode 0]
		]
	]
	guitab "Ents"
	guilistsplit n 2 $enttypelist [
		guibutton (concatword "New " $n " Entity  ") [ newent @n ]
	]

	guitab "Blend"

	guitext (concat Brush: (getblendbrushname (curblendbrush)))
	guistayopen [guilist [
		guibutton "Prev" [nextblendbrush -1]
		guistrut 10
		guibutton "Next" [nextblendbrush 1]
	]]
	guistrut 1
	guistayopen [
		guibutton "rotate blend brush" "rotateblendbrush"
		guibutton "clear entire blendmap" "clearblendmap"
		guibutton "clear blendmap in selection" "clearblendmapsel"
	]
	guistrut 1
	guitext "Mode"
	guiradio "off" blendpaintmode 0
	guiradio "replace" blendpaintmode 1
	guiradio "dig" blendpaintmode 2
	guiradio "fill" blendpaintmode 3
	guiradio "inverted dig" blendpaintmode 4
	guiradio "inverted fill" blendpaintmode 5

	guitab "Lightmaps"

	guilist [
		guistayopen [
			guibutton "High Quality	" "calclight 1"
			guibutton "(patch)" "patchlight 1"
			guistrut 4
			guibutton "Low Quality	" "calclight -1"
			guibutton "(patch)" "patchlight -1"
		]
	]
	guistrut 1

	guilist [
		guitext "Anti Aliasing:	"
		guifield lmaa -6
		guititle (concatword "	" (at "1x 2x 4x 8x" $lmaa)) $guitextcolour
	]
	guilist [
		guitext "Shadows:		"
		guifield lmshadows -6
		guititle (concatword "	" (at "Off Simple Alpha-Blended" $lmshadows)) $guitextcolour
	]
	guilist [
		guistayopen [
			guibutton "Calculate with above settings	" calclight
			guibutton "(patch)" "patchlight"
		]
	]
	guistrut 1

	guilist [
		guitext "Blur Lightmaps:	"
		guifield blurlms -6;
	]
	guilist [
		guitext "Blur Skylight:	"
		guifield blurskylight -6
	]
	guilist [
		guitext "Precision:		"
		guifield lightprecision -6
	]
	guilist [
		guitext "Error:		"
		guifield lighterror -6
	]
	guilist [
		guitext "Threads:		"
		guifield lightthreads -6
	]
	guistrut 1

	guilist [
		guilist [
			guitext "Skylight Colours"
			setcollevels skycol $skylight
			guilist [colfieldsb skycol skylight []]
		]
		guistrut 6
		guilist [
			guitext "Ambient Colours"
			setcollevels ambientcol $ambient
			guilist [colfieldsb ambientcol ambient []]
		]
	]

	guitab "PVS"
	guistayopen [
		guibutton "Calculate PVS data" "genpvs $pvssize"
		guibutton "Clear PVS data" "clearpvs"
		guibutton "Generate Test Cell" "testpvs"
		guibutton "Show Stats" "pvsstats"
		guibutton "Lock Cell" "lockpvs (! $lockpvs)"
	]
	guistrut 1
	guilist [
		guitext "Cell Size:	"
		guifield pvssize -8 [clamp pvssize 8 4096]
	]
	guilist [
		guitext "Threads:	"
		guifield pvsthreads -8
	]
	guitab cfg
	guitext (mapcfgname)
	showfileeditor (mapcfgname) -50 11
]

newgui mapmodels [
	itemsnum = (* 2 $guiautotab)
	loop i (+ (div (nummapmodels) $itemsnum) (if (mod (nummapmodels) $itemsnum) 1 0)) [
		if $i [guitab (+ $i 1)]
		guilist [
			guilist [
				loop j (min $guiautotab (- (nummapmodels) (* $i $itemsnum))) [
					num = (+ $j (* $i $itemsnum))
					guibutton (mapmodelname $num) (format "newent mapmodel %1" $num)
				]
			]
			guilist [
				loop j (min $guiautotab (- (nummapmodels) (+ (* $i $itemsnum) $guiautotab))) [
					num = (+ $j (+ (* $i $itemsnum) $guiautotab))
					guibutton (mapmodelname $num) (format "newent mapmodel %1" $num)
				]
			]
		]
	]
]

newgui mapmodel [
	guitext $tmpt
	setcollevels col $tmp5
	guibar

	drawentprops "Direction Model ^"Trigger Type^" ^"Trigger Tag^" Radius" [0 360 0 @(- (nummapmodels) 1) 0 29 -200 200 0 1000]
	guilist [
		guitext (tabify "Colour (RGB):" 3)
		colfieldsa col tmp5 entupdate
	]

	guitab "misc"
	guicheckbox "Usesliders" entguitype 1 0
	@quickeditmenu

	guitab "Mapmodels
	itemsnum = (* 2 $guiautotab)
	loop i (+ (div (nummapmodels) $itemsnum) (if (mod (nummapmodels) $itemsnum) 1 0)) [
		if $i [guitab (+ $i 3)]
		guilist [
			guilist [
				loop j (min $guiautotab (- (nummapmodels) (* $i $itemsnum))) [
					num = (+ $j (* $i $itemsnum))
					guibutton (mapmodelname $num) (format "tmp1 =  %1; entupdate" $num)
				]
			]
			guilist [
				loop j (min $guiautotab (- (nummapmodels) (+ (* $i $itemsnum) $guiautotab))) [
					num = (+ $j (+ (* $i $itemsnum) $guiautotab))
					guibutton (mapmodelname $num) (format "tmp1 =  %1; entupdate" $num)
				]
			]
		]
	]
]

newgui particles [
	cond [&& (<= $tmp0 2) (>= $tmp0 0)] [
		curpart = 1
		setcollevels col $tmp3

		guilist [
			guiradio "Fire + Smoke" tmp0 0 [entupdate]
			guibar
			guiradio "Fire" tmp0 1 [entupdate]
			guibar
			guiradio "Smoke" tmp0 2 [entupdate]
		]

		guibar
		drawentprops "Radius Height" [0 5000 0 5000] 1
		guilist [
			guitext (tabify "Colour (RGB):" 3)
			colfieldsa col tmp3 entupdate
		]
		drawentprops "Size Speed Fade Gravity" [0 10000 -10000 10000 0 60000 -2000 2000] 4

	] [|| (= $tmp0 3) (= $tmp0 4)] [
		curpart = 2
		guilist [
			guiradio "Smoke" tmp0 3 [entupdate]
			guibar
			guiradio "Fountain" tmp0 4 [entupdate]
		]
		guibar
		drawentprops "Direction Radius Fade Size Gravity" [ 0 5 0 10000 0 60000 0 10000 -2000 2000 ] 1
	] [= $tmp0 5] [
		curpart = 3
		setcollevels col $tmp2
		drawentprops "Size" [-5 100] 1
		guilist [
			guitext (tabify "Clour (RGB):" 3)
			colfieldsa col tmp2 entupdate
		]
	] [|| (= $tmp0 6) (= $tmp0 7)] [
		curpart = 4
		setcollevels col $tmp2
		setcollevels col2 $tmp3
		guilist [
			guiradio "Normal style" tmp0 6 [entupdate]
			guibar
			guiradio "Versus style" tmp0 7 [entupdate]
		]
		drawentprops "^"Captured Percentage^"" [0 100] 1
		guilist [
			guitext (tabify "Colour (RGB):" 3)
			colfieldsa col tmp2 entupdate
		]
		guilist [
			guitext (tabify "Colour2 (RGB):" 3)
			colfieldsa col2 tmp3 entupdate
		]
	] [= $tmp0 8] [
		curpart = 5
		setcollevels col $tmp2
		drawentprops "Tag" [ 0 10000 ] 1
		guilist [
			guitext (tabify "Contents:" 3)
			guifield part_text_@tmp1 -18
		]
		guilist [
			guitext (tabify "Colour (RGB):" 3)
			colfieldsa col tmp2 entupdate
		]
		drawentprops "Size" [0 10000] 3
	] [&& (>= $tmp0 9) (<= $tmp0 15)] [
		setcollevels col $tmp3
		curpart = 6

		guilist [
			guilist [
				guiradio "Flare" tmp0 9 [entupdate]
				guiradio "Lightning" tmp0 10 [entupdate]
			]
			guibar
			guilist [
				guiradio "Fire" tmp0 11 [entupdate]
				guiradio "Smoke" tmp0 12 [entupdate]
			]
			guibar
			guilist [
				guiradio "Water" tmp0 13 [entupdate]
				guiradio "Snow" tmp0 14 [entupdate]
			]
			guibar
			guilist [
				guiradio "Leaves" tmp0 15 [entupdate]
			]
		]
		guibar
		if (> $tmp1 255) [
			multieffectreverse = (& $tmp1 32)
			multieffectvalue = (& $tmp1 31)
			partmultieffectname $multieffectvalue

			guilist [
				guistayopen [ guibutton "Use Direction" [tmp1 = (rnd 6); entupdate] ]
				guibar
				guistayopen [ guicheckbox "Reverse" multieffectreverse 32 0 [tmp1 = (| 256 (| $multieffectvalue $multieffectreverse )); entupdate] ]
			]
			guitext $multieffectname
			guilist [
				guitext (tabify "Effect: " 3)
				guifield multieffectvalue -18 [ clamp multieffectvalue 0 0x1F; tmp1 = (| 256 (| $multieffectvalue $multieffectreverse)); entupdate]
			]
			guistrut 1
		 ] [
			guistayopen [guibutton "Use Effects" [tmp1 = (+ 256 (rnd 64)); entupdate]]
			drawentprops "Direction" [0 5] 1
			guistrut 2
		]
		drawentprops "Length" [0 10000] 2
		guilist [
			guitext (tabify "Colour (RGB):" 3)
			colfieldsa col tmp3 entupdate
		]
		drawentprops "^"Fade Time^" Size Velocity Gravity" [-60000 60000 0 10000 -10000 10000 -2000 2000 ] 4
	] [&& (>= $tmp0 32) (<= $tmp0 35)] [
		curpart = 7
		guilist [
			guilist [
				guiradio "Normal" tmp0 32 [entupdate]
				guiradio "Normal W/ Sparkle" tmp0 33 [entupdate]
			]
			guilist [
				guiradio "Fixed" tmp0 34 [entupdate]
				guiradio "Fixed W/ Sparkle" tmp0 35 [entupdate]
			]
		]
		guibar
		guilist [
			guitext (tabify "Colour (RGB):" 3)
			guifield tmp1 -4 [clamp tmp1 0 255; entupdate] (mergecollevels $tmp1 $tmp2 $tmp3)
			guibar
			guifield tmp2 -4 [clamp tmp2 0 255; entupdate] (mergecollevels $tmp1 $tmp2 $tmp3)
			guibar
			guifield tmp3 -4 [clamp tmp3 0 255; entupdate] (mergecollevels $tmp1 $tmp2 $tmp3)
		]
		drawentprops "Size" [0 10000] 4
	]

	guitab type

	guiradio "Fire"       curpart 1 [tmp0 = (at "0 1 2" (rnd 3)); entupdate]
	guiradio "Standard"   curpart 2 [tmp0 = (at "3 4" (rnd 2)); entupdate]
	guiradio "Explosion"  curpart 3 [tmp0 = 5; entupdate]
	guiradio "Bars"       curpart 4 [tmp0 = (at "6 7" (rnd 2)); entupdate]
	guiradio "Text"       curpart 5 [tmp0 = 8; entupdate]
	guiradio "Effect"     curpart 6 [tmp0 = (at "9 10 11 12 13 14 15" (rnd 7)); entupdate]
	guiradio "Lens Flare" curpart 7 [tmp0 = (at "32 33 34 35" (rnd 4)); entupdate]

	guitab ent
	guilistsplit n 2 $enttypelist [
		guibutton $n [ entset @n ]
	]

	guitab misc
	guicheckbox "Usesliders" entguitype 1 0
	@quickeditmenu
]

newgui quickedit [
	@quickeditmenu
	guitab "materials"
	@matmenu
]

newgui heightfield [
	@brushmenu
	guitab "misc"
	@quickeditmenu
]

newgui skies [
	guitext (format "Current skybox:	0%1" $skybox)
	guitext (format "Current cloudbox:	0%1" $cloudbox)
	guitext (format "Current cloudlayer:	0%1" $cloudlayer)
	guistrut 4
	guilist [
		guitext "Path: "
		guifield newskypath -50
	]
	guistrut 1
	guistayopen [
		guibutton "Apply as Skybox"     [skybox $newskypath]
		guibutton "Apply as Cloudbox"   [cloudbox $newskypath]
		guibutton "Apply as Cloudlayer" [cloudlater $newskypath]
	]

	guitab "Skyboxes"
	guilist [
		guilist [
			genskyitems $loopix loopix skybox
			genskyitems $amethyst7 amethyst7 skybox
			genskyitems $skyboxes skyboxes skybox
			genskyitems $penguins penguins skybox

		]
		guibar
		showskyshot
		guibar
		guilist [
			genskyitems $vegastrike skyboxes/vs skybox
			genskyitems $mayhem mayhem skybox
		]
	]

	guitab "Cloudboxes"
	guilist [
		guilist [
			guibutton "Empty" "cloudbox ^"^"" skybox
			genskyitems $cloudboxen clouds cloudbox
		]
		guibar
		showskyshot
	]

	guitab "Cloudlayers"
	guilist [
		guistayopen [
			guilist [
				guibutton "Empty" "cloudlayer ^"^"" skybox
				loop i $numcloudlayers [
					guibutton (concatword "clouds " (+ $i 1)) (format "cloudlayer clouds/clouds%1" (+ $i 1))
				]
			]
			guibar
			guiimage (format "<scale:128,128>packages/%1" (at $guirolloveraction 1)) $skyload 4 1 data/sandboxlogo
		]
	]

	guitab "Settings"

	guilist [
		guilist [
			guititle "Skyboxes"
			guilist [
				guitext "Spin:		"
				guifield spinsky -8
			]
			guilist [
				guitext "Yaw:		"
				guifield yawsky -8
			]

			guistrut 1
			guitext "Colour (RGB)"
			guilist [
				setcollevels skycol $skyboxcolour
				colfieldsb skycol skyboxcolour []
			]
			guistrut 1
			guititle "Fogdome"
			guilist [
				guicheckbox "Cap:		" fogdomecap
				guifield fogdomecap -8
			]
			guilist [
				guitext "Clip:		"
				guifield fogdomeclip -8
			]
			guilist [
				guitext "Height:	"
				guifield fogdomeheight -8
			]
			guilist [
				guitext "Min:		"
				guifield fogdomemin -8
			]
			guilist [
				guitext "Max:		"
				guifield fogdomemax -8
			]
			guistrut 1
			guitext "Colour (RGB)"
			guilist [
				setcollevels fdcol $fogdomecolour
				colfieldsb fdcol fogdomecolour []
			]
		]
		guibar
		guilist [
			guititle "Cloudboxes"
			guilist [
				guitext "Alpha:	"
				guifield cloudboxalpha -8
			]
			guilist [
				guitext "Clip:		"
				guifield cloudclip -8
			]
			guilist [
				guitext "Spin:		"
				guifield spinclouds -8

			]
			guilist [
				guitext "Yaw:		"
				guifield yawclouds -8
			]
			guistrut 1
			guitext "Colour (RGB)"
			guilist [
				setcollevels cloudcol $cloudboxcolour
				colfieldsb cloudcol cloudboxcolour []
			]
		]
		guibar
		guilist [
			guititle "Cloudlayers"
			guilist [
				guitext "Alpha:	"
				guifield cloudalpha -8
			]
			guilist [
				guitext "Fade:		"
				guifield cloudfade -8
			]
			guilist [
				guitext "Height:	"
				guifield cloudheight -8
			]
			guilist [
				guitext "Scale:	"
				guifield cloudscale -8
			]
			guilist [
				guitext "Scroll-X:	"
				guifield cloudscrollx -8
			]
			guilist [
				guitext "Scroll-Y:	"
				guifield cloudscrolly -8
			]
			guilist [
				guitext "Spin:		"
				guifield spincloudlayer -8
			]
			guilist [
				guitext "Yaw:		"
				guifield yawcloudlayer -8
			]
			guistrut 1
			guitext "Colour (RGB)"
			guilist [
				setcollevels "layercol" $cloudcolour
				colfieldsb layercol cloudcolour []
			]
		]
	]
] "Skies"

newgui entfind [
	guitext "Set the attributes below to search for"
	guicheckbox "Type (see next tab)" dosearch0
	loop i 8 [
		guilist [
			guicheckbox (format "attr %1	" (+ $i 1)) [dosearch@(+ $i 1)]
			guifield [enta@(+ $i 1)] 11 [clamp [enta@(+ $i 1)] -0x7FFFFFFF 0x7FFFFFFF]
		]
	]

	guilist [
		guiradio "off" doinsel 0
		guistrut 2
		guiradio "inside selection" doinsel 1
		guistrut 2
		guiradio "outside selection" doinsel 2
	]

	guibar
	guistayopen [
		guibutton "Copy Attributes from currently selected entity" [
			loop i 8 [
				if (strcmp (entattr $i) "") [
					[enta@(+ $i 1)] = 0
				] [
					[enta@(+ $i 1)] = (entattr $i)
				]
			]
			loop i (listlen $enttypelist) [
				if (strcmp (enttype) (at $enttypelist $i)) [
					entt = $i
				]
			]
		]
	]
	guibar

	guistayopen [
		guibutton "select all valid entities" [entselect [(findents)]]
	]

	guitab Type
	guilist [
		loop i (+ (div (listlen $enttypelist) 10) 1) [
			guilist [
				loop j (min (- (listlen $enttypelist) (* 10 $i)) 10) [
					guiradio (at $enttypelist (+ $j (* $i 10))) entt (+ $j (* $i 10))
				]
			]
		]
	]
]

newgui newparticles [
	guibutton "Create Fire/Smoke" "newent particles $newpartfiretype $newpartrad $newpartfireheight (mergecollevels $col1 $col2 $col3) $newpartsize $newpartvel $newpartfade $newpartgrav"
	guibar
	guilist [
		guiradio "Flame + Smoke" newpartfiretype 0
		guibar
		guiradio "Flame" newpartfiretype 1
		guibar
		guiradio "Smoke" newpartfiretype 2
	]
	guibar
	guilist [
		guitext (tabify "Area/Radius:" 3)
		guifield newpartrad -18 [ clamp newpartrad 0 5000 ]
	]
	guilist [
		guitext (tabify "Height:" 3)
		guifield newpartfireheight -18 [ clamp newpartfireheight 0 5000 ]
	]
	guilist [
		guitext (tabify "Colour (RGB):" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Size:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]
	guilist [
		guitext (tabify "Speed:" 3)
		guifield newpartvel -18 [clamp newpartvel -10000 10000]
	]
	guilist [
		guitext (tabify "Fade:" 3)
		guifield newpartfade -18 [clamp newpartfade 0 60000]
	]
	guilist [
		guitext (tabify "Gravity:" 3)
		guifield newpartgrav -18 [clamp newpartgrav -2000 2000]
	]

	guitab "Standard"
	guibutton "Create" "newent particles $newpartstdtype $newpartdir $newpartradius $newpartfade $newpartsize $newpartgrav"
	guibar
	guilist [
		guiradio "Smoke" newpartstdtype 3
		guibar
		guiradio "Fountain" newpartstdtype 4
	]
	guibar

	guilist [
		guitext (tabify "Direction:" 3)
		guifield newpartdir -18 [ clamp newpartdir 0 5]
	]
	guilist [
		guitext (tabify "Radius:" 3)
		guifield newpartrad -18 [ clamp newpartrad 0 5000 ]
	]
	guilist [
		guitext (tabify "Fade:" 3)
		guifield newpartfade -18 [clamp newpartfade 0 60000]
	]
	guilist [
		guitext (tabify "Size:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]
	guilist [
		guitext (tabify "Gravity:" 3)
		guifield newpartgrav -18 [clamp newpartgrav -2000 2000]
	]

	guitab "Explosion"
	guibutton "Create" "newent particles  5 $newpartexpsize (mergecollevels $col1 $col2 $col3)"
	guibar
	guilist [
		guitext (tabify "Size:" 3)
		guifield newpartexpsize -18 [ clamp newpartexpsize -5 1000 ]
	]
	guilist [
		guitext (tabify "Colour (RGB):" 3)
		colfields col
	]

	guitab "Bars
	guibutton "Create" "newent particles $newpartbartype $newpartbarprcnt (mergecollevels $col1 $col2 $col3) (mergecollevels $col21 $col22 $col23)"
	guibar
	guilist [
		guiradio "Standard" newpartbartype 6
		guibar
		guiradio "Versus" newpartbartype 7
	]
	guibar
	guitext "Percentage"
	guislider newpartbarprcnt 0 100
	guilist [
		guitext (tabify "Colour (RGB):" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Colour2 (RGB):" 3)
		colfields col2
	]

	guitab "Text"
	guibutton "Create" "newent particles 8 $newparttag (mergecollevels $col1 $col2 $col3) $newpartsize"
	guibar

	guilist [
		guitext (tabify "Tag:" 3)
		guifield newparttag -18 [ clamp newparttag 0 10000 ]
	]
	guilist [
		guitext (tabify "Contents:" 3)
		guifield part_text_@newparttag -40
	]
	guilist [
		guitext (tabify "Colour (RGB):" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Size:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]

	guitab "Effects"
	guibutton "Create" "newent particles $newpartmulttype $newpartmultvalue $newpartmultlen (mergecollevels $col1 $col2 $col3) (* $newpartfade $newpartmulteffcollide) $newpartsize $newpartvel $newpartgrav"
	guibar
	guilist [
		guilist [
			guiradio "Flare" newpartmulttype 9
			guiradio "Lightning" newpartmulttype 10
		]
		guibar
		guilist [
			guiradio "Fire" newpartmulttype 11
			guiradio "Smoke" newpartmulttype 12
		]
		guibar
		guilist [
			guiradio "Snow" newpartmulttype 14
			guiradio "Water" newpartmulttype 13
		]
		guibar
		guilist [
			guiradio "Leaves" newpartmulttype 15
		]
	]
	guibar
	if $newpartmulteff [
		guilist [
			guicheckbox "Use effects" newpartmulteff 1 0 [newpartmultvalue = (rnd 6)]
			guibar
			guicheckbox "Reverse" newpartmultrev 32 0
			guistrut 1
			guicheckbox "Collide" newpartmulteffcollide -1 1
		]
		guibar
		guilist [
			guitext (tabify "Effect:" 3)
			guifield newpartmulteffect -18 [ newpartmulteffect = (& $newpartmulteffect 0x1F) ]
			guistrut 5
			guitext $multieffectname
			partmultieffectname $newpartmulteffect
		]
		newpartmultvalue = (|  256 (| $newpartmulteffect $newpartmultrev))
	] [
		guicheckbox "Use effects" newpartmulteff
		guibar
		guilist [
			guitext (tabify "Direction:" 3)
			guifield newpartmultvalue -18 [ clamp newpartvalue 0 5 ]
		]
	]

	guilist [
		guitext (tabify "Length:" 3)
		guifield newpartmultlen -18 [ clamp newpartmultlen 0 10000 ]
	]
	guilist [
		guitext (tabify "a:" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Fade:" 3)
		guifield newpartfade -18 [clamp newpartfade 0 60000]
	]
	guilist [
		guitext (tabify "Size:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]
	guilist [
		guitext (tabify "Speed:" 3)
		guifield newpartvel -18 [clamp newpartvel -10000 10000]
	]
	guilist [
		guitext (tabify "Gravity:" 3)
		guifield newpartgrav -18 [clamp newpartgrav -2000 2000]
	]

	guitab "Lens Flares"
	guibutton "Create" "newent particles $newpartflaretype $col1 $col2 $col3 $newpartsize"
	guibar
	guilist [
		guiradio "Normal" newpartflaretype 32
		guibar
		guiradio "Normal W/ sparkle" newpartflaretype 33
		guibar
		guiradio "Fixed" newpartflaretype 34
		guibar
		guiradio "Fixed W/ Sparkle" newpartflaretype 35
	]
	guibar
	guilist [
		guitext (tabify "Colour (RGB):" 3)
		colfields col
	]
	guilist [
		guitext (tabify "Size:" 3)
		guifield newpartsize -18 [clamp newpartsize 0 10000]
	]
] "Fire"

testcheckbox = 0
testradio = 0
testfield = "field"
testslider = 0

newgui setguicol [
	guilist [
		guitext (tabify "Title Colour:" 4)
		setcollevels titlecol $guititlecolour
		colfieldsb titlecol guititlecolour
	]
	guilist [
		guitext (tabify "Rollover Colour:" 4)
		setcollevels rollcol $guirollovercolour
		colfieldsb rollcol guirollovercolour
	]
	guilist [
		guitext (tabify "Text Colour:" 4)
		setcollevels textcol $guitextcolour
		colfieldsb textcol guitextcolour
	]
	guilist [
		guitext (tabify "Button Colour:" 4)
		setcollevels buttoncol $guibuttoncolour
		colfieldsb buttoncol guibuttoncolour
	]
	guilist [
		guitext (tabify "Checkbox Colour:" 4)
		setcollevels checkcol $guicheckboxcolour
		colfieldsb checkcol guicheckboxcolour
	]
	guilist [
		guitext (tabify "Slider Colour:" 4)
		setcollevels slidercol $guislidercolour
		colfieldsb slidercol guislidercolour
	]

	guistrut 1
	guititle "Title"
	guitext "Text"
	guitextbox "Textbox"
	guistayopen [guibutton "Action" "echo Help! I'm a button that's being repressed!"]
	guifield testfield
	guicheckbox "Checkbox" testcheckbox
	guilist [
		guiradio "radio 0" testradio 0
		guistrut 1
		guiradio "radio 1" testradio 1
	]
	guislider testslider 0 100

] "GUI Colours"

newgui themes [
	clamp themeidx 0 (- $themenum $guiautotab)
	guistayopen [
		guilist [
			guilist [
				loop i (min $themenum $guiautotab) [
					index = (+ $themeidx $i)
					guibutton (at $themes $index) (format "exec data/hud/%1.cfg" (at $themes $index))
				]
			]
			guibar
			guislider themeidx 0 (- $themenum $guiautotab) "" 0 1
			guibar
			guiimage (concatword "data/hud/" $guirollovername) $guirolloveraction (divf $guiautotab 2) 1 data/sandboxlogo
		]
	]
] "GUI Themes"

newgui pastebuffer [
    guinoautotab [
        guieditor "#pastebuffer" -80 20
        guistayopen [
            guilist [
                guibutton "exec" [textfocus "#pastebuffer"; textexec]
                guibar
                guibutton "clear" [textfocus "#pastebuffer"; textclear]
            ]
        ]
    ]
]

newgui scratchpad [
    guinoautotab [
        guieditor "#scratchpad" -80 20
        guistayopen [
            guilist [
                guibutton "exec" [textfocus "#scratchpad"; textexec]
                guibar
                guibutton "copy" [textfocus "#scratchpad"; textcopy]
                guibar
                guibutton "paste" [textfocus "#scratchpad"; textpaste]
                guibar
                guibutton "select" [textfocus "#scratchpad"; textselectall]
                guibar
                guibutton "clear" [textfocus "#scratchpad"; textclear]
            ]
        ]
    ]
]

newgui help [
	guititle "Help menu"
	guibar
	guibutton "keybinds" "showgui keybinds"
]

universalbindsnk = [
"Right Click - Jump"
"Mouse Wheel - Zoom"
"Space - Jump"
"Shift - Toggle Shift Mutator"
"CTRL - Toggle Control Mutator"
"9 - toggles first/third person"
"W/up - forward"
"A/left - Left"
"S/down - Backwards"
"D/right - Right"
"T - opens command line"
"~/Slash - opens command line with /"
"E - toggles editmode"
"- (KP) - scrolls console up 1"
"+ (KP) - scrolls console down 1"
"F1 - Pause"
"F11 - toggle console"
"F12 - take screenshot"
"ESC - show main menu or go back"
]

universalbindsc = [
"E - Show quickedit"
"- (KP) - scrolls console up 20"
"+ (KP) - scrolls console down 20"
"F12 - take a screenshot without the HUD"
"ESC - clear GUIs"
"9 - First person"
]

universalbindss = [
"E - Show texture GUI"
"- (KP) - scrolls console up 5"
"+ (KP) - scrolls console down 5"
"9 - Third Person"
]

universalbindssc = [
"E - Edit mapcfg"
"- (KP) - scrolls console up 1000"
"+ (KP) - scrolls console down 1000"
"9 - Free Rotation"
]

fpsbinds = [
"0 - Cycle Through Playermodels"
"I - Taunt"
"TAB - Showscores"
]

sspbinds = [
"W/up - Jump"
"A/left - move left/down"
"S/down - switchaxis (temporary)"
"D/right - move right/up"
]

rpgbinds = [
	"1-0  - Hotkey 1-10"
	"F6 - Quicksave"
	"F9 - QuickLoad"
	"E - use"
	"F1 - Toggle Edit Mode"
]

krsbinds = [none]

moviebinds = [
"0 - player properties"
"Q - play animation"
"up - look up"
"left - look left"
"down - look down"
"right - look right"
]

universaleditbindsnk = [
"left click - select or paint blendmap"
"right click - extend selection or rotate blendmap"
"middle click - select corners"
"scroll wheel - edits geometry or selects blend brush"
"B/J - scrolls through heightfield brushes (wheel)"
"C - copy"
"F - push/pull face (wheel)"
"G - change gridsize (wheel)"
"H - toggle heightfieldmode"
"K - poor calclight"
"L - toggle fullbright"
"M - toggle material boxes"
"N/Enter (KP) - select ents in selection"
"P - cycle blendpaint modes"
"Q - push corner (wheel)"
"R - Rotate (wheel)"
"U/Z - Undo"
"V - Paste"
"Y - cycle textures (wheel)"
"1 - ent attribute 1 (wheel)"
"2 - ent attribute 2 (wheel)"
"3 - ent attribute 3 (wheel)"
"4 - ent attribute 4 (wheel)"
"5 - ent attribute 5 (wheel)"
"F2 - Show Texture GUI"
"F3 - Quick Edit"
"F4 - Skies"
"F5 - Find Entity"
"F6 - edit mapcfg"
"F7 - editmode options"
", - cycle ents (wheel)"
". - edit entity"
"Backspace/Del - delete"
"= - add 50 to floatspeed"
"- - take 50 from floatspeed"
]

universaleditbindsc = [
"C - copy"
"K - high quality calclight"
"N - newmap"
"P - turn off blendpaint"
"V - paste"
"X - flip geometry"
"Y - Redo"
"Z - undo"
"backspace/del - delete everything in selection"
"= - add 100 to floatspeed"
"- - take 100 from floatspeed"
]

universaleditbindss = [
"C - set material to clip"
"G - set material to glass"
"K - Normal Calclight"
"L - Lava"
"N - set material to noclip"
"R - set material to respawn"
"Y - Show Texture GUI"
"1 - toggle dynlight previews"
"2 - toggle outline depth testing"
"3 - toggle light previews"
"4 - toggle HUD"
"5 - toggle particle previews"
"6 - toggle entity snap"
"7 - cycle geometry outlines"
"8 - toggle wireframe"
"0 - toggle all faces texturing"
"= - add 10 to floatspeed"
"- - take 10 from floatspeed"
]

universaleditbindssc = [
"K - best calclight"
"Z - redo"
"= - floatspeed 1000"
"- - floatspeed 10"
]

fpseditbinds = [none]

sspeditbinds = [none]

rpgeditbinds = [
	"F1 - Toggle editmode"
]

krseditbinds = [none]

movieeditbinds = [
"9 - add actor"
]

newgui keybinds [
	guititle "Game binds - note that game specific binds take precedence"
	guilist [
		guilist [
			guititle "no key mutators"
			loop i (listlen $universalbindsnk) [
				guitext (at $universalbindsnk $i)
			]
		]
		guilist [
			guititle "with SHIFT"
			loop i (listlen $universalbindss) [
				guitext (at $universalbindss $i)
			]
			guititle "with CTRL"
			loop i (listlen $universalbindsc) [
				guitext (at $universalbindsc $i)
			]
			guititle "with CTRL + SHIFT"
			loop i (listlen $universalbindssc) [
				guitext (at $universalbindssc $i)
			]
			guititle (format "%1 module binds" (getgame))
			loop i (listlen $[@(getgame)binds]) [
				guitext (at $[@(getgame)binds] $i)
			]
		]
	]
	guitab "editbinds 1"
	//eek!
	guititle "no key mutators"
	guilist [
		n = (listlen $universaleditbindsnk) //funny how much faster and neater this makes the script
		loop i 2 [
			guilist [
				loop j (min (- $n (* $i (div $n 2))) (div $n 2)) [
					guitext (at $universaleditbindsnk (+ $j (* (div $n 2) $i)))
				]
			]
		]
	]
	guitab "editbinds 2"
	guilist [
		guilist [
			guititle "With CTRL"
			loop i (listlen $universaleditbindsc) [
				guitext (at $universaleditbindsc $i)
			]
			guititle "With CTRL + SHIFT"
			loop i (listlen $universaleditbindssc) [
				guitext (at $universaleditbindssc $i)
			]
			guititle (format "%1 module binds" (getgame))
			loop i (listlen $[@(getgame)editbinds]) [
				guitext (at $[@(getgame)editbinds] $i)
			]
		]
		guilist [
			guititle "With SHIFT"
			loop i (listlen $universaleditbindss) [
				guitext (at $universaleditbindss $i)
			]
		]
	]
]

